jQuery(function(e){e("a#deletePost").click(function(){var t=e(this).data("postid");return swal({title:"Attention",text:"Êtes vous sûr de vouloir supprimer le Post?",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Non",confirmButtonText:"Oui",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1,reverseButtons:!1}).then(function(n){n.value?(e.ajax({url:"/posts/delete/"+t,type:"DELETE",dataType:"JSON",success:function(e){!0===e?swal({title:"Supprimé!",text:"Le Post a bien été supprimé",type:"success",timer:1500,showConfirmButton:!1}).then(function(){window.location.href="/posts"}):swal({title:"Oups...",text:"Il y a eu un problème lors de la suppression dans la base de donnée",type:"error",timer:1500,showConfirmButton:!1})}}),swal("Supprimé!","Your file has been deleted.","success")):"cancel"===n.dismiss&&swal("Annulé","Your imaginary file is safe :)","error")}),event.preventDefault(),!1}),e("form#PostCreateForm").submit(function(t){e(this).find("ul#errorMessage").length>0&&e(this).find("ul#errorMessage").remove();var n=formToJSON(this),o=!1,r="",s=e(this).find('button[type="submit"]');return n.titleField.length<1&&(o=!0,r+="<li>Vous devez rentrer un titre</li>"),n.contentField.length<1&&(o=!0,r+="<li>Vous devez écrire du contenu</li>"),!1===o?e.ajax({url:window.location.href,type:"POST",data:n,dataType:"JSON",success:function(t){!0===t?swal({title:"Sauvegardé!",text:"Le Post a bien été créé",type:"success",timer:1500,showConfirmButton:!1}).then(function(){window.location.href="/posts"}):!1===t?swal({title:"Oups...",text:"Il y a eu un problème lors de la sauvegarde dans la base de donnée",type:"error",timer:1500,showConfirmButton:!1}):(r="",e.each(t,function(e,t){r+="<li>"+t+"</li>"}),s.before('<ul id="errorMessage">'+r+"</ul>"))}}):s.before('<ul id="errorMessage">'+r+"</ul>"),t.preventDefault(),!1}),e("form#PostEditForm").submit(function(t){e(this).find("ul#errorMessage").length>0&&e(this).find("ul#errorMessage").remove();var n=formToJSON(this),o=!1,r="",s=e(this).find('button[type="submit"]');return n.titleField.length<1&&(o=!0,r+="<li>Vous devez rentrer un titre</li>"),n.contentField.length<1&&(o=!0,r+="<li>Vous devez écrire du contenu</li>"),!1===o?e.ajax({url:window.location.href,type:"PATCH",data:n,dataType:"JSON",success:function(t){!0===t?swal({title:"Sauvegardé!",text:"Le Post a bien été édité",type:"success",timer:1500,showConfirmButton:!1}).then(function(){window.location.href="/posts"}):!1===t?swal({title:"Oups...",text:"Il y a eu un problème lors de la sauvegarde dans la base de donnée",type:"error",timer:1500,showConfirmButton:!1}):(r="",e.each(t,function(e,t){r+="<li>"+t+"</li>"}),s.before('<ul id="errorMessage">'+r+"</ul>"))}}):s.before('<ul id="errorMessage">'+r+"</ul>"),t.preventDefault(),!1})});